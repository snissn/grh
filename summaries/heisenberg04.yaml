a2a_doc:
  meta:
    title_long: "Heisenberg Holonomy IV: Adelic Modulus, Holonomy, and the Explicit Formula"
    title_short: "Heisenberg Holonomy IV"
    authors: UNKNOWN
    venue: UNKNOWN
    year: UNKNOWN
    version: UNKNOWN
    url: UNKNOWN
    area: "analytic number theory; adelic harmonic analysis; Heisenberg geometry"
    normalization: UNKNOWN
    primary_objects:
      - name: "H^1(ℚ_v)"
        type: "Heisenberg group (local)"
        role: "local geometric stage; carries canonical holonomy functional"
      - name: "H^1(𝔄_ℚ)"
        type: "adelic Heisenberg manifold"
        role: "global space assembling local geometries"
      - name: "ℝ_{>0}^×"
        type: "modulus line (scale)"
        role: "global scaling parameter; probed by test profiles"
      - name: "𝒟_v^{comb}"
        type: "distribution/functional"
        role: "canonical local holonomy on H^1(ℚ_v)"
      - name: "W_Φ(u)"
        type: "scale-profile test function"
        role: "probes holonomy along modulus"
      - name: "𝒬_MS(g)"
        type: "scalar functional"
        role: "total adelic holonomy; equals geometric side of EF"
      - name: "𝒜(g), 𝒫(g)"
        type: "decomposition terms"
        role: "archimedean/primes blocks of geometric EF"
    normalization_sheet:
      finite_places:
        euler_factors: UNKNOWN
        measure: UNKNOWN
        satake_params: UNKNOWN
      arch_place:
        scattering_matrix: UNKNOWN
        pv_convention: UNKNOWN
        spectral_measure: UNKNOWN
      dictionary_constants:
        note: "proportionalities between scale-profile side and Fourier/Mellin side"
        example: "W_Φ(u) ↔ ĝ_Φ(2u) with constant c_* = UNKNOWN"
    identities_checked:
      - id: ID1
        stmt: "𝒬_MS(g) = Σ_v ⟨𝒟_v^{comb}, W_Φ⟩ = 𝒜(g) + 𝒫(g)"
        src: "paper:general"
    asks: "If any constant differs from a standard reference (cite), document and justify."

  problem_and_claim:
    problem: "Adelize the Heisenberg-holonomy framework (I–III), identify the global modulus line, and realize the geometric side of the Weil explicit formula as total adelic holonomy."
    core_claims:
      - {id: C1, name: "Local holonomy", status: proved, statement: "Each place v admits a canonical holonomy functional 𝒟_v^{comb} on H^1(ℚ_v).", src: "paper:general"}
      - {id: C2, name: "Adelic assembly", status: proved, statement: "Assembling {𝒟_v^{comb}} over all v yields a global holonomy 𝒬_MS(g) along ℝ_{>0}^×.", src: "paper:general"}
      - {id: C3, name: "Explicit formula (geom.)", status: proved, statement: "𝒬_MS(g) equals the geometric side of the explicit formula, decomposing as 𝒜(g)+𝒫(g).", src: "paper:general"}
      - {id: C4, name: "Scale profiles", status: proved, statement: "Tests W_Φ(u) realize scale profiles that probe holonomy and isolate EF contributions.", src: "paper:general"}
    route_map:
      - {id: R1, name: "Local→global holonomy", inputs: "[H^1(ℚ_v), 𝒟_v^{comb}]", output: "𝒬_MS(g)", status: proved}
      - {id: R2, name: "Scale-profile calculus", inputs: "[W_Φ, modulus]", output: "block decomposition 𝒜+𝒫", status: proved}
    asks: "Provide a one-paragraph ‘why now’ and identify the minimal new ingredient vs Papers I–III."

  notation:
    symbols:
      ℚ: "rationals"; 𝔄_ℚ: "adeles of ℚ"; v: "place (finite/∞)"
      H^1(–): "3D Heisenberg group"
      ℝ_{>0}^×: "modulus line (log-scale u)"
      Φ: "primary test on modulus; induces W_Φ"
      g, ĝ: "log-side profile and transform (Fourier/Mellin conventions UNKNOWN)"
      𝒟_v^{comb}: "local holonomy functional"
      𝒬_MS(g): "total adelic holonomy"
      𝒜(g), 𝒫(g): "arch/primes terms in EF (geom.)"
    equivalences:
      UNKNOWN: UNKNOWN
    asks: "State domains/codomains explicitly (e.g., W_Φ: ℝ→ℝ), and any hidden identifications (e.g., X=G/K, spherical Fourier side)."

  spaces_and_classes:
    classes:
      - id: S1
        name: "Test profiles"
        def: "W_Φ on log-scale u with regularity/decay suitable for EF pairings."
        norms: UNKNOWN
      - id: S2
        name: "Adelic test data"
        def: "Restricted tensor products across v compatible with 𝒟_v^{comb}."
        norms: UNKNOWN
    asks: "Give minimal examples/counterexamples for S1,S2 (e.g., compact support vs Schwartz)."

  assumptions:
    items:
      - {id: A1, statement: "Regularity/decay of Φ ensuring absolute convergence of pairings ⟨𝒟_v^{comb}, W_Φ⟩.", params: "Φ ∈ ?; decay exponents ?", proved_here: TRUE, proof_src: "paper:general", portability: "likely across GL(1) variants"}
      - {id: A2, statement: "Product formula/compatibility of local normalizations to form H^1(𝔄_ℚ).", params: "measures, Haar × counting", proved_here: UNKNOWN, proof_src: UNKNOWN, portability: "adelic standard"}
    counterexamples_or_limits: "Weak decay may break convergence of Σ_v terms."
    asks: "Clarify sharpness of decay and portability to other normalizations."

  constructions_and_kernels:
    defs:
      - id: K1
        name: "Local holonomy"
        formula: "𝒟_v^{comb}: 𝒮(H^1(ℚ_v))' with canonical invariance; exact symbol UNKNOWN."
        props: "pos/PSD UNKNOWN; boundedness on model space UNKNOWN."
      - id: K2
        name: "Total holonomy"
        formula: "𝒬_MS(g)=Σ_v⟨𝒟_v^{comb}, W_Φ⟩"
        factorization: "splits 𝒜(g)+𝒫(g)"
    compatibility_checklist:
      commute: "UNKNOWN"
      weyl_invariance: "UNKNOWN"
      boundedness: "UNKNOWN"
      model_independence: "Expected via unitary equivalence; proof cite UNKNOWN."
    asks: "State functional calculus used and where symbol bounds enter."

  explicit_formula_block:
    geometric_side:
      total: "𝒬_MS(g)=𝒜(g)+𝒫(g)"
      arch_piece: "𝒜(g) from v=∞"
      primes_piece: "𝒫(g) from finite v"
      regularizations: "PV/heat cutoffs UNKNOWN"
    spectral_side:
      zeros_sum: UNKNOWN
      gamma_terms: UNKNOWN
      constants: UNKNOWN
    weil_functional_GL1:
      rho_W: UNKNOWN
    ramified_ledger:
      when_present: "finite v with ramification (here ζ: none)"
      sign: UNKNOWN
      bound: UNKNOWN
      vanishing_cases: "all finite p unramified (for ζ)"
    positivity_table:
      - term: "prime"
        status: UNKNOWN
        cond: UNKNOWN
      - term: "arch"
        status: UNKNOWN
        cond: UNKNOWN
    asks: "Specify which terms are ≥0 under which test classes; give exact rho_W."

  main_results:
    results:
      - {id: T1, name: "Adelic holonomy = EF geom.", statement: "𝒬_MS(g)=𝒜(g)+𝒫(g).", conditions: "[A1–A2,S1–S2]", dependencies: "[C1–C2,K1–K2]", status: proved, src: "paper:general"}
      - {id: P1, name: "Local canonical holonomy", statement: "Existence/uniqueness (up to scale) of 𝒟_v^{comb}.", conditions: "[normalization sheet]", dependencies: "[structure of H^1(ℚ_v)]", status: proved, src: "paper:general"}
      - {id: P2, name: "Scale-profile calculus", statement: "W_Φ isolates modulus contributions.", conditions: "[Φ regularity]", dependencies: "[Fourier/Mellin dictionary]", status: proved, src: "paper:general"}
    asks: "Give one-line invariant-theoretic reason for each positivity claim."

  dependency_graph:
    nodes: [A1,A2,S1,S2,K1,K2,C1,C2,C3,C4,T1,P1,P2]
    edges:
      - "A1 -> T1"
      - "A2 -> T1"
      - "S1 -> T1"
      - "S2 -> T1"
      - "K1 -> C1"
      - "C1 -> C2"
      - "K2 -> C3"
      - "C2 -> C3"
      - "C4 -> T1"
      - "P1 -> C1"
      - "P2 -> C4"
    asks: "Mark any optional branches/cycles."

  proof_skeletons:
    items:
      - id: SK1
        for: T1
        steps:
          - "Local: define 𝒟_v^{comb} with chosen Haar/normalizations."
          - "Assemble: restricted product across v; define 𝒬_MS(g)."
          - "Pairing: evaluate ⟨𝒟_v^{comb}, W_Φ⟩; identify arch vs prime."
          - "Summation: justify Σ_v convergence/absolute bounds."
          - "Identification: match 𝒜(g), 𝒫(g) with EF geometric terms."
        fragile_step: "Convergence/justification of exchanging sums/integrals (Σ_v with transforms)."
        alt_route: "Poisson summation on Heisenberg lattice model, then pass to adeles."
    asks: "What unique step fails first in higher rank?"

  limits_and_continuity:
    t_to_0_passages: "UNKNOWN"
    density_args: "Approximate W_Φ by compactly supported/Schwartz sequences; topology UNKNOWN."
    constants_table:
      - {name: "C_loc(v)", origin: "local bounds on 𝒟_v^{comb}", uniform_in_t: UNKNOWN, dep_on_a: UNKNOWN}
      - {name: "C_glob", origin: "Σ_v majorant", uniform_in_t: UNKNOWN, dep_on_a: UNKNOWN}
    asks: "Provide uniform constants and specify where blow-ups occur."

  checks_and_recipes:
    numerical_recipe: "Choose Φ so that W_Φ has compact u-support; compute a few local pairings numerically."
    symbolic_recipe: "Verify 𝒬_MS(g)=𝒜+𝒫 by expanding local terms and comparing with standard EF blocks."
    pseudocode: |
      Input Φ
      -> build W_Φ(u)
      -> for v in places: compute L_v := ⟨𝒟_v^{comb}, W_Φ⟩
      -> return sum_v L_v, and split into arch/primes by v
    toy_numeric:
      alpha_X_choice: "ĝ(x)=e^{-αx}·χ_{(0,X]} with α=1/3, X=5"
      rhoW_integral: "∫_0^∞ ĝ(x)·ρ_W(x) dx  (ρ_W UNKNOWN)"
      prime_terms: "Σ_{p≤11} (log p)·F(p) with F from W_Φ-profile; signs/units to smoke-test"
    asks: "Provide a canonical toy Φ to fix signs and constants."

  scope_and_unconditionality:
    unconditional: "Local/global holonomy construction and its identification with EF(geom.) appear unconditional under stated regularity."
    program_inputs:
      - {id: PI1, formal_statement: "Exact Fourier/Mellin dictionary constants", current_status: UNKNOWN, needed_for: "normalized comparisons", candidates_for_proof: "direct computation"}
      - {id: PI2, formal_statement: "Positivity conditions for chosen test class", current_status: UNKNOWN, needed_for: "applications to zero-free regions", candidates_for_proof: "variation of test profiles"}
    asks: "Offer a minimum viable theorem if regularity is weakened."

  limitations:
    items:
      - "Precise normalization choices at finite/arch places not fully documented here."
      - "Spectral (zeros) side not explicitly recorded in this part."
      - "Positivity status of each EF piece under W_Φ is undeclared."
    asks: "Give counterexamples when assumptions on Φ are weakened."

  projections:
    ideas:
      - "Port to GL(m) and general automorphic L-functions via higher-dimensional Heisenberg models."
      - "Quantify positivity to derive explicit zero-density or zero-free regions."
      - "Numerical holonomy samplers for ramified test data."
    asks: "Prioritize milestones and a verification plan (local constants; end-to-end EF check on ζ)."

