a2a_doc:
  meta:
    title_long: "Heisenberg Holonomy IV: Adelic Modulus, Holonomy, and the Explicit Formula"
    title_short: "Heisenberg Holonomy IV"
    authors: "Michael Seiler"
    venue: "Preprint (CC BY 4.0)"
    year: 2025
    version: "v1 (2025-09-03)"
    url: "https://orcid.org/0009-0009-5529-2008"
    area: "analytic number theory; adelic harmonic analysis; Heisenberg geometry"
    msc: { primary: "11M26", secondary: ["11F72","22E27","53C17"] }
    normalization: "Mellin-symmetric (GL(1)): primes at critical p^{-n/2}; archimedean via Γ_R(s); host orientation α_H=dθ"
    primary_objects:
      - name: "H^1(ℚ_v)"
        type: "Heisenberg group (local)"
        role: "local geometric stage; carries canonical holonomy functional"
      - name: "H^1(𝔄_ℚ)"
        type: "adelic Heisenberg manifold"
        role: "global space assembling local geometries"
      - name: "ℝ_{>0}^×"
        type: "modulus line (scale)"
        role: "global scaling parameter; probed by test profiles"
      - name: "𝒟_v^{comb}"
        type: "distribution/functional"
        role: "canonical local holonomy on H^1(ℚ_v)"
      - name: "W_Φ(u)"
        type: "scale-profile test function"
        role: "probes holonomy along modulus"
      - name: "𝒬_MS(g)"
        type: "scalar functional"
        role: "total adelic holonomy; equals geometric side of EF"
      - name: "𝒜(g), 𝒫(g)"
        type: "decomposition terms"
        role: "archimedean/primes blocks of geometric EF"
    normalization_sheet:
      finite_places:
        euler_factors: "L_p(s)=∏_{j}(1−α_{p,j}p^{−s})^{-1}; for ζ: L_p(s)=(1−p^{-s})^{-1}"
        measure: "Dirac comb D_p(u)=Σ_{k≥1}(log p)·δ(u−k log p); ⟨D_p,W⟩=Σ_{k≥1}(log p)W(k log p)"
        satake_params: "GL(1) Satake parameters α_{p,j}; for ζ: α_{p,1}=1 (unramified)"
      arch_place:
        scattering_matrix: "γ_∞(s)=Γ_R(s)=π^{-s/2}·Γ(s/2)"
        pv_convention: "Principal value on S^1 for singular kernels (Hilbert transform), host form α_H=dθ"
        spectral_measure: "Half-line cosine variable ξ with Lebesgue dξ; s=1/2+iξ on the spectral side"
      dictionary_constants:
        note: "proportionalities between scale-profile side and Fourier/Mellin side"
        example: "W_Φ(u)=(1/π)(1−e^{−u})·ĝ_b(2u)  ⇒ c_* = 1/π  (cosine profile ĝ_b)"
    identities_checked:
      - "Finite places: Dirac comb D_p (eq. (1), Part IV)"
      - "Archimedean density ρ_W via Γ_R (eq. (2), Part IV)"
      - "Weil test on the half-line W(u)=(1/π)(1-e^{-u})·ĝ_b(2u) (eq. (3), Part IV)"
      - "Adelic holonomy = explicit formula (Theorem 1.1 / eq. (4), Part IV)"
    asks: "If any constant differs from a standard reference (cite), document and justify."

  problem_and_claim:
    problem: "Adelize the Heisenberg-holonomy framework (I–III), identify the global modulus line, and realize the geometric side of the Weil explicit formula as total adelic holonomy."
    core_claims:
      - {id: C1, name: "Local holonomy", status: proved, statement: "Each place v admits a canonical holonomy functional 𝒟_v^{comb} on H^1(ℚ_v).", src: "paper:general"}
      - {id: C2, name: "Adelic assembly", status: proved, statement: "Assembling {𝒟_v^{comb}} over all v yields a global holonomy 𝒬_MS(g) along ℝ_{>0}^×.", src: "paper:general"}
      - {id: C3, name: "Explicit formula (geom.)", status: proved, statement: "𝒬_MS(g) equals the geometric side of the explicit formula, decomposing as 𝒜(g)+𝒫(g).", src: "paper:general"}
      - {id: C4, name: "Scale profiles", status: proved, statement: "Tests W_Φ(u) realize scale profiles that probe holonomy and isolate EF contributions.", src: "paper:general"}
    route_map:
      - {id: R1, name: "Local→global holonomy", inputs: "[H^1(ℚ_v), 𝒟_v^{comb}]", output: "𝒬_MS(g)", status: proved}
      - {id: R2, name: "Scale-profile calculus", inputs: "[W_Φ, modulus]", output: "block decomposition 𝒜+𝒫", status: proved}
    asks: "Provide a one-paragraph ‘why now’ and identify the minimal new ingredient vs Papers I–III."

  notation:
    symbols:
      ℚ: "rationals"
      𝔄_ℚ: "adeles of ℚ"
      v: "place (finite/∞)"
      H^1(–): "3D Heisenberg group"
      ℝ_{>0}^×: "modulus line (log-scale u)"
      Φ: "primary test on modulus; induces W_Φ"
      g, ĝ: "g even; ĝ_b = cosine transform on [0,∞); u=log x; s=1/2+iξ with ξ the cosine-Fourier variable"
      𝒟_v^{comb}: "local holonomy functional"
      𝒬_MS(g): "total adelic holonomy"
      𝒜(g), 𝒫(g): "arch/primes terms in EF (geom.)"
    equivalences:
      Mellin-Fourier: "u↔ξ via (F_c W)(ξ)=∫_0^∞ W(u)cos(2uξ)du; spectral side s=1/2+iξ; host kernel α_C=J·α_H on |z|=1 and dz=J·z·α_H"
    asks: "State domains/codomains explicitly (e.g., W_Φ: ℝ→ℝ), and any hidden identifications (e.g., X=G/K, spherical Fourier side)."

  spaces_and_classes:
    classes:
      - id: S1
        name: "Test profiles"
        def: "W_Φ on log-scale u with regularity/decay suitable for EF pairings."
        norms: "T_α([0,∞)), α>1/2: sup_{u≥0} e^{αu}|∂^k W(u)|<∞ (all k); stable under E_a and C_{1/2}=(Id−E_{1/2})(Id−E)^{-1} with kernel T_{1/2}(x)=(1+e^{−x/2})^{-1}"
      - id: S2
        name: "Adelic test data"
        def: "Restricted tensor products across v compatible with 𝒟_v^{comb}."
        norms: "Restricted tensor product across places; finite v via Dirac-comb pairing; arch v via cosine side; absolute convergence under T_α"
    asks: "Give minimal examples/counterexamples for S1,S2 (e.g., compact support vs Schwartz)."

  assumptions:
    items:
      - {id: A1, statement: "Regularity/decay of Φ ensuring absolute convergence of pairings ⟨𝒟_v^{comb}, W_Φ⟩.", params: "Φ ∈ ?; decay exponents ?", proved_here: TRUE, proof_src: "paper:general", portability: "likely across GL(1) variants"}
      - {id: A2, statement: "Product formula/compatibility of local normalizations to form H^1(𝔄_ℚ).", params: "measures, Haar × counting", proved_here: UNKNOWN, proof_src: UNKNOWN, portability: "adelic standard"}
    counterexamples_or_limits: "Weak decay may break convergence of Σ_v terms."
    asks: "Clarify sharpness of decay and portability to other normalizations."

  constructions_and_kernels:
    defs:
      - id: K1
        name: "Local holonomy"
        formula: "𝒟_v^{comb}: 𝒮(H^1(ℚ_v))' with canonical invariance; exact symbol UNKNOWN."
        props: "pos/PSD UNKNOWN; boundedness on model space UNKNOWN."
      - id: K2
        name: "Total holonomy"
        formula: "𝒬_MS(g)=Σ_v⟨𝒟_v^{comb}, W_Φ⟩"
        factorization: "splits 𝒜(g)+𝒫(g)"
    compatibility_checklist:
      commute: "UNKNOWN"
      weyl_invariance: "UNKNOWN"
      boundedness: "UNKNOWN"
      model_independence: "Expected via unitary equivalence; proof cite UNKNOWN."
    asks: "State functional calculus used and where symbol bounds enter."

  explicit_formula_block:
    geometric_side:
      total: "𝒬_MS(g)=𝒜(g)+𝒫(g)"
      arch_piece: "𝒜(g) from v=∞"
      primes_piece: "𝒫(g) from finite v"
      regularizations: "Distributional pairing; archimedean side via (F_c W) against d/dξ log Γ_R; no extra PV for the finite comb"
    spectral_side:
      zeros_sum: "Σ_ρ H(g;ρ) (nontrivial zeros counted with multiplicity)"
      gamma_terms: "archimedean/trivial terms from Γ_R(s) (Mellin-symmetric ledger)"
      constants: "Prime normalization at critical p^{-n/2}; ⟨D_∞,W⟩=−𝒜(g); ⟨D_p,W⟩ builds 𝒫(g)"
    weil_functional_GL1:
      rho_W: "ρ_W(ξ)=−(1/π)·d/dξ[log Γ_R(1/2+iξ)+log Γ_R(1/2−iξ)]  (arch density)"
    ramified_ledger:
      when_present: "finite v with ramification (here ζ: none)"
      sign: "n/a for ζ (all finite p unramified); in general, twisted finite blocks follow character weights"
      bound: "finite set at ramified p; contributions uniformly controlled for T_α tests"
      vanishing_cases: "ζ: all finite p unramified; twists: D_{p,χ}(u)=Σ_{k≥1}(log p)χ(p)^k δ(u−k log p), and at ∞ use Db_{∞,χ}(ξ)=−∂_ξ log[Γ_∞(1/2+iξ,χ_∞)Γ_∞(1/2−iξ,χ_∞)] (Part IV §6)"
    positivity_table:
      - term: "prime"
        status: "≥ 0"
        cond: "for autocorrelations g=g_Φ after the Mellin–torsion filter C_{1/2}"
      - term: "arch"
        status: "≤ 0"
        cond: "for autocorrelations g=g_Φ after the Mellin–torsion filter C_{1/2}"
    asks: "Specify which terms are ≥0 under which test classes; give exact rho_W."

  main_results:
    results:
      - {id: T1, name: "Adelic holonomy = EF geom.", statement: "𝒬_MS(g)=𝒜(g)+𝒫(g).", conditions: "[A1–A2,S1–S2]", dependencies: "[C1–C2,K1–K2]", status: proved, src: "paper:general"}
      - {id: P1, name: "Local canonical holonomy", statement: "Existence/uniqueness (up to scale) of 𝒟_v^{comb}.", conditions: "[normalization sheet]", dependencies: "[structure of H^1(ℚ_v)]", status: proved, src: "paper:general"}
      - {id: P2, name: "Scale-profile calculus", statement: "W_Φ isolates modulus contributions.", conditions: "[Φ regularity]", dependencies: "[Fourier/Mellin dictionary]", status: proved, src: "paper:general"}
    asks: "Give one-line invariant-theoretic reason for each positivity claim."

  dependency_graph:
    nodes: [A1,A2,S1,S2,K1,K2,C1,C2,C3,C4,T1,P1,P2]
    edges:
      - "A1 -> T1"
      - "A2 -> T1"
      - "S1 -> T1"
      - "S2 -> T1"
      - "K1 -> C1"
      - "C1 -> C2"
      - "K2 -> C3"
      - "C2 -> C3"
      - "C4 -> T1"
      - "P1 -> C1"
      - "P2 -> C4"
    asks: "Mark any optional branches/cycles."

  proof_skeletons:
    items:
      - id: SK1
        for: T1
        steps:
          - "Local: define 𝒟_v^{comb} with chosen Haar/normalizations."
          - "Assemble: restricted product across v; define 𝒬_MS(g)."
          - "Pairing: evaluate ⟨𝒟_v^{comb}, W_Φ⟩; identify arch vs prime."
          - "Summation: justify Σ_v convergence/absolute bounds."
          - "Identification: match 𝒜(g), 𝒫(g) with EF geometric terms."
        fragile_step: "Convergence/justification of exchanging sums/integrals (Σ_v with transforms)."
        alt_route: "Poisson summation on Heisenberg lattice model, then pass to adeles."
    asks: "What unique step fails first in higher rank?"

  limits_and_continuity:
    t_to_0_passages: "not used in Part IV (fixed-modulus-line formulation; no heat-time parameter)"
    density_args: "Use T_α([0,∞)) (α>1/2) and the E_a-family to approximate by compact support; dominated convergence applies"
    constants_table:
      - {name: "C_loc(v)", origin: "local bounds on 𝒟_v^{comb}", uniform_in_t: "n/a (no t)", dep_on_a: "depends on α in T_α"}
      - {name: "C_glob", origin: "Σ_v majorant", uniform_in_t: "n/a (no t)", dep_on_a: "depends on α; finite p by support of W"}
    asks: "Provide uniform constants and specify where blow-ups occur."

  checks_and_recipes:
    numerical_recipe: "Choose Φ so that W_Φ has compact u-support; compute a few local pairings numerically."
    symbolic_recipe: "Verify 𝒬_MS(g)=𝒜+𝒫 by expanding local terms and comparing with standard EF blocks."
    pseudocode: |
      Input Φ
      -> build W_Φ(u)
      -> for v in places: compute L_v := ⟨𝒟_v^{comb}, W_Φ⟩
      -> return sum_v L_v, and split into arch/primes by v
    toy_numeric:
      alpha_X_choice: "ĝ(x)=e^{-αx}·χ_{(0,X]} with α=1/3, X=5"
      rhoW_integral: "∫_0^∞ (F_c W)(ξ)·[−(1/π) d/dξ (log Γ_R(1/2+iξ)+log Γ_R(1/2−iξ))] dξ"
      prime_terms: "P(g)=Σ_p Σ_{k≥1} (log p)·W(k·log p); if supp W ⊆ [0,X], restrict to k·log p ≤ X (Example 8.1, Part IV)"
    asks: "Provide a canonical toy Φ to fix signs and constants."

  scope_and_unconditionality:
    unconditional: "Local/global holonomy construction and its identification with EF(geom.) appear unconditional under stated regularity."
    program_inputs:
      - {id: PI1, formal_statement: "Exact Fourier/Mellin dictionary constants", current_status: UNKNOWN, needed_for: "normalized comparisons", candidates_for_proof: "direct computation"}
      - {id: PI2, formal_statement: "Positivity conditions for chosen test class", current_status: UNKNOWN, needed_for: "applications to zero-free regions", candidates_for_proof: "variation of test profiles"}
    asks: "Offer a minimum viable theorem if regularity is weakened."

  limitations:
    items:
      - "Precise normalization choices at finite/arch places not fully documented here."
      - "Spectral (zeros) side not explicitly recorded in this part."
      - "Positivity status of each EF piece under W_Φ is undeclared."
    asks: "Give counterexamples when assumptions on Φ are weakened."

  projections:
    ideas:
      - "Port to GL(m) and general automorphic L-functions via higher-dimensional Heisenberg models."
      - "Quantify positivity to derive explicit zero-density or zero-free regions."
      - "Numerical holonomy samplers for ramified test data."
    asks: "Prioritize milestones and a verification plan (local constants; end-to-end EF check on ζ)."
